<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Saint-Guilhem-le-Désert — аббатство и панорамы</title>
  <meta name="description" content="Saint-Guilhem-le-Désert: аббатство Жилон, музей, обед на площади, обзорная площадка. Полный день с опцией керамики или каяка." />
  <meta property="og:title" content="Saint-Guilhem-le-Désert — аббатство и панорамы" />
  <meta property="og:description" content="Аббатство, музей, обед, прогулка по деревне и belvédère. Опции: керамика, каяк." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/IMG_4003.JPG" />
  <meta name="theme-color" content="#0D2B1E" />
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <header class="hero" style="background-image:url('assets/IMG_4003.JPG');background-size:cover;background-position:center;">
    <div class="wrap hero__inner">
      <span class="pill">Лангедок • 1 день</span>
      <h1 data-i18n="hero.title">Saint-Guilhem-le-Désert — аббатство, музей и панорамы</h1>
      <p class="sub" data-i18n="hero.sub">Классический день без спешки: аббатство Жилон, музей, обед на площади (выбор ресторана) и подъём на обзорную площадку над ущельем Verdus.</p>
    </div>
  </header>

  <nav class="lang">
    <a href="#" data-lang="ru" class="active">RU</a> •
    <a href="#" data-lang="fr">FR</a>
  </nav>

  <main class="wrap">
    <section id="program">
      <h2 data-i18n="program">Программа</h2>
      <ul id="schedule"></ul>
    </section>

    <section>
      <h2 data-i18n="included">Что включено</h2>
      <ul id="inc-list"></ul>
    </section>

    <section>
      <h2 data-i18n="excluded">Не включено</h2>
      <ul id="ex-list"></ul>
    </section>

    <section>
      <h2 data-i18n="options">Опции</h2>
      <ul id="opt-list"></ul>
    </section>

    <section>
      <h2 data-i18n="practice">Практика</h2>
      <ul id="pract-list"></ul>
    </section>

    <section>
      <h2 data-i18n="price">Стоимость</h2>
      <p><strong>362 €</strong> <span data-i18n="price.base">за 2 гостей</span><br>
      +70 € <span data-i18n="price.extra">за каждого сверх 2</span><br>
      Примеры: 3 гостя — 432 €; 4 гостя — 502 €.</p>
    </section>

    <!-- GALLERY -->
    <section id="gallery" class="container">
      <h3 class="section-title">Фотогалерея</h3>
      <div class="gallery-grid">
        <img src="assets/IMG_4003.JPG" alt="Saint-Guilhem-le-Désert вид 1">
        <img src="assets/IMG_6643.JPG" alt="Saint-Guilhem-le-Désert вид 2">
        <img src="assets/IMG_6705.JPG" alt="Saint-Guilhem-le-Désert вид 3">
      </div>
    </section>

    <!-- MAP -->
    <section id="map" class="container">
      <h3 class="section-title" data-i18n="map.title">Карта дня</h3>
      <p class="section-sub" data-i18n="map.sub">Основные точки: деревня, аббатство, музей, belvédère и Pont du Diable.</p>
      <div class="card" style="padding:0">
        <div id="mapSGD" aria-label="Карта маршрута"></div>
      </div>
    </section>

    <section>
      <h2 data-i18n="contact">Забронировать</h2>
      <form onsubmit="openMail(event)">
        <input type="text" name="name" placeholder="Имя" />
        <input type="text" name="contact" placeholder="Контакт" />
        <textarea name="message" placeholder="Даты и количество гостей"></textarea>
        <button type="submit">Отправить</button>
      </form>
      <p><a id="emailBtn" href="mailto:hello@example.com">Написать письмо</a></p>
    </section>
  </main>

  <style>
    #mapSGD{ height:360px; border-radius:16px; overflow:hidden; box-shadow:var(--shadow); border:1px solid #eee; }
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin:1em 0;}
    .gallery-grid img{width:100%;height:auto;border-radius:12px;box-shadow:var(--shadow);}
  </style>

  <!-- Сценарии: программа, тексты, i18n -->
  <script>/* ...весь JS как раньше, без изменений... */</script>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('mapSGD', { scrollWheelZoom:false, zoomControl:true });

    const baseLayers = {
      'OSM': L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'&copy; OpenStreetMap contributors' }),
      'Topo': L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { attribution:'&copy; OpenTopoMap, &copy; OSM contributors' }),
      'Satellite': L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { attribution:'Tiles &copy; Esri' })
    };
    baseLayers.OSM.addTo(map);

    const brandColor = getComputedStyle(document.documentElement).getPropertyValue('--brand').trim() || '#0D2B1E';

    const spots = [
      { ru:'Парковка в деревне', fr:'Parking au village', coords:[43.73390, 3.54850] },
      { ru:'Аббатство Жилон', fr:'Abbaye de Gellone', coords:[43.73445, 3.54880] },
      { ru:'Музей аббатства', fr:'Musée de l’abbaye', coords:[43.73455, 3.54870] },
      { ru:'Belvédère (панорама)', fr:'Belvédère (panorama)', coords:[43.73600, 3.54650] },
      { ru:'Pont du Diable', fr:'Pont du Diable', coords:[43.70480, 3.55200] }
    ];

    const markers=[]; const bounds=[];
    spots.forEach(p=>{ const m=L.marker(p.coords).addTo(map); markers.push(m); bounds.push(p.coords); });
    L.polyline([spots[0].coords, spots[1].coords, spots[3].coords], { color:brandColor, weight:3, opacity:.9 }).addTo(map);
    map.fitBounds(bounds, { padding:[30,30] });

    function updateMapLang(l){ spots.forEach((p,i)=>{ markers[i].bindPopup('<b>'+ (l==='fr'?p.fr:p.ru) +'</b>'); }); }
    updateMapLang(localStorage.getItem('prog:lang')||'ru');

    L.control.layers(baseLayers,null).addTo(map);
  </script>
</body>
</html>
